<!DOCTYPE html>
<html>
  <head>
    <title>
      
        Getting started |
      
      Tedious
    </title>

    <meta http-equiv="content-type" content="text/html;charset=utf-8" />

    <link type='text/css' rel='stylesheet' href='http://fonts.googleapis.com/css?family=The+Girl+Next+Door'>
    <link type="text/css" rel="stylesheet" href="style/reset.css"/>
    <link type="text/css" rel="stylesheet" href="style/tedious.css"/>
    <link type="text/css" rel="stylesheet" href="style/syntax.css"/>
  </head>

  <body>
    <div class="ribbon">
      <a href="http://github.com/pekim/tedious">
        Fork me on GitHub
      </a>
    </div>

    <div id="navigation">
      <div class="heading">
        <a href="index.html">Tedious</a>
      </div>

      <ul>
        <li>
          <a href="index.html">Overview</a>
        </li>
        <li>
          <a href="installation.html">Installation</a>
        </li>
        <li>
          <a href="getting-started.html">Getting started</a>
        </li>
        <li>
          <a href="parameters.html">Using Parameters</a>
        </li>
        <li>
          <a href="api.html">API</a>
          <ul>
            <li>
              <a href="api-connection.html">
                <code>Connection</code>
              </a>
            </li>
            <li>
              <a href="api-request.html">
                <code>Request</code>
              </a>
            </li>
            <li>
              <a href="api-datatypes.html">Datatypes</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="changelog.html">ChangeLog</a>
        </li>
        <li>
          <a href="licence.html">Licence</a>
        </li>
      </ul>

      <div id="search">
        <form action="https://google.com/search">
          <input type="text" name="q" maxlength="255" value="" placeholder="search" />
          <input type="hidden" name="sitesearch" value="pekim.github.com" />
        </form>
      </div>
    </div>

    <div id="content">
      <h1>Getting started</h1>

<p>
  In this introduction, error handling, and some other details are glossed over.
</p>

<p>
  Connecting to the database looks like this.
</p>

<div class="highlight"><pre><code class="javascript">  <span class="kd">var</span> <span class="nx">Connection</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;tedious&#39;</span><span class="p">).</span><span class="nx">Connection</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">userName</span><span class="o">:</span> <span class="s1">&#39;test&#39;</span><span class="p">,</span>
    <span class="nx">password</span><span class="o">:</span> <span class="s1">&#39;test&#39;</span><span class="p">,</span>
    <span class="nx">server</span><span class="o">:</span> <span class="s1">&#39;192.168.1.210&#39;</span><span class="p">,</span>
  <span class="p">};</span>

  <span class="kd">var</span> <span class="nx">connection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Connection</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

  <span class="nx">connection</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;connect&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// If no error, then good to go...</span>
      <span class="nx">executeStatement</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">);</span>
</code></pre>
</div>


<p>
  The arguments to the
  <a href="api-connection.html">
    <code>Connection</code>
  </a>
  constructor are
  <em>host</em>, <em>username</em>, <em>password</em>,
  an <em>options object</em> (empty in this example),
  and a <em>callback function</em>.
</p>

<p>
  The connect event is emitted when either the connection has been established
  and authentication has succeeded, or an error occurred during connection or authentication.
</p>

<p>
  Once a connection has been established, a query can be executed.
</p>

<div class="highlight"><pre><code class="javascript">  <span class="kd">var</span> <span class="nx">Request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;tedious&#39;</span><span class="p">).</span><span class="nx">Request</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">executeStatement</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="s2">&quot;select 42, &#39;hello world&#39;&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">rowCount</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">rowCount</span> <span class="o">+</span> <span class="s1">&#39; rows&#39;</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">request</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;row&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">columns</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">columns</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">column</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">column</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">});</span>

    <span class="nx">connection</span><span class="p">.</span><span class="nx">execSql</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre>
</div>


<p>
  A request is represented by a
  <a href="api-request.html">
    <code>Request</code>
  </a>
  instance.
  The arguments to <code>Request</code>'s constructor are
  the SQL statement, and a callback function.
  The callback is called if an error occurs.
</p>

<p>
  A <code>row</code> event is emitted for each row returned as a result of executing the statement.
  An array of columns is the sole parameter to the callback.
  For each column, a value and metadata is provided (although only the value is used in this example).
</p>

<p>
  When the request is complete, the callback is called.
</p>

<p>
  To execute the statement, the <code>Connection</code>'s
  <a href="api-connection.html#function_execSql"><code>execSql</code></a> must be called.
</p>

<p>
  An example based around these code fragments can be found in
  <a href="https://github.com/pekim/tedious/blob/master/examples/minimal.js">
    <code>examples/minimal.js</code>
  </a>.
</p>

    </div>

    <div id="footer">
      Copyright &copy; 2011-2013 Mike D Pilsbury
    </div>
  </body>
</html>
